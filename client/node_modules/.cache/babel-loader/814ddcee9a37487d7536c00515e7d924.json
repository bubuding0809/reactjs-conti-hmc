{"ast":null,"code":"import _defineProperty from\"/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from\"react\";import Vimeo from\"@u-wave/react-vimeo\";import VideoForm from\"./VideoForm\";import VideoControls from\"./VideoControls\";import{nanoid}from\"nanoid\";import{Box}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function VideoStreamer(){var _useState=useState({videoUrl:\"https://vimeo.com/712561471\"// Set default video URL to empty string\n}),_useState2=_slicedToArray(_useState,2),videoFormConfig=_useState2[0],setVideoFormConfig=_useState2[1];var _useState3=useState({id:nanoid(),// Set default video ID to empty string\nvideo:\"https://vimeo.com/712561471\",// Set default video to 712561471\nquality:\"1080\",// Set default quality to 1080p\nstart:0,// Set default start time to 0\nloop:true,// Set default loop to true\npaused:true,// Set default state to paused\nvolume:0// Set default state to muted\n}),_useState4=_slicedToArray(_useState3,2),streamerConfig=_useState4[0],setStreamerConfig=_useState4[1];function toggleVideoPlay(){setStreamerConfig(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{paused:!prevState.paused});});}function toggleVideoLoop(){setStreamerConfig(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{loop:!prevState.loop});});}function toggleVideoMute(){setStreamerConfig(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{volume:prevState.volume===0?0.5:0});});}function handleFormChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;// Update the form state.\nsetVideoFormConfig(function(prevState){var _objectSpread2;return _objectSpread(_objectSpread({},prevState),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,value),_defineProperty(_objectSpread2,\"isloadDisabled\",value?false:true),_objectSpread2));});}function handleFormSubmit(event){event.preventDefault();// Update the streamer config.\nsetStreamerConfig(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{// Generate a random ID to be used as for the key prop to remount vimeo player\nid:nanoid(),video:videoFormConfig.videoUrl,quality:streamerConfig.quality,start:0,paused:true});});}function handleVideoQualityChange(event){var quality=event.target.value;// Update the streamer config.\nsetStreamerConfig(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{id:nanoid(),quality:quality});});}function handleVideoTimeUpdate(event){// Keep track of the current time of the video.\nsetStreamerConfig(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{start:event.seconds});});}return/*#__PURE__*/_jsxs(Box,{p:1,children:[/*#__PURE__*/_jsx(VideoForm,{videoFormConfig:videoFormConfig,handleFormChange:handleFormChange,handleFormSubmit:handleFormSubmit}),/*#__PURE__*/_jsx(Vimeo/* Remount the Vimeo player when the ID changes, \n                 so to ensure new video quality gets applied */,{video:streamerConfig.video,quality:streamerConfig.quality,paused:streamerConfig.paused,start:streamerConfig.start,autoplay:!streamerConfig.paused,loop:streamerConfig.loop,volume:streamerConfig.volume,onTimeUpdate:handleVideoTimeUpdate,onEnd:function onEnd(){return setStreamerConfig(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{paused:true});});},controls:true,responsive:true},streamerConfig.id),/*#__PURE__*/_jsx(VideoControls,{streamerConfig:streamerConfig,toggleVideoPlay:toggleVideoPlay,toggleVideoLoop:toggleVideoLoop,toggleVideoMute:toggleVideoMute,handleVideoQualityChange:handleVideoQualityChange})]});}export default VideoStreamer;","map":{"version":3,"names":["React","useEffect","useState","useRef","Vimeo","VideoForm","VideoControls","nanoid","Box","VideoStreamer","videoUrl","videoFormConfig","setVideoFormConfig","id","video","quality","start","loop","paused","volume","streamerConfig","setStreamerConfig","toggleVideoPlay","prevState","toggleVideoLoop","toggleVideoMute","handleFormChange","event","target","name","value","handleFormSubmit","preventDefault","handleVideoQualityChange","handleVideoTimeUpdate","seconds"],"sources":["/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/src/components/VideoStreamer.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport Vimeo from \"@u-wave/react-vimeo\";\nimport VideoForm from \"./VideoForm\";\nimport VideoControls from \"./VideoControls\";\nimport { nanoid } from \"nanoid\";\nimport { Box } from \"@mui/material\";\n\nfunction VideoStreamer() {\n    const [videoFormConfig, setVideoFormConfig] = useState({\n        videoUrl: \"https://vimeo.com/712561471\", // Set default video URL to empty string\n    });\n\n    const [streamerConfig, setStreamerConfig] = useState({\n        id: nanoid(), // Set default video ID to empty string\n        video: \"https://vimeo.com/712561471\", // Set default video to 712561471\n        quality: \"1080\", // Set default quality to 1080p\n        start: 0, // Set default start time to 0\n        loop: true, // Set default loop to true\n        paused: true, // Set default state to paused\n        volume: 0, // Set default state to muted\n    });\n\n    function toggleVideoPlay() {\n        setStreamerConfig(prevState => {\n            return {\n                ...prevState,\n                paused: !prevState.paused,\n            };\n        });\n    }\n\n    function toggleVideoLoop() {\n        setStreamerConfig(prevState => {\n            return {\n                ...prevState,\n                loop: !prevState.loop,\n            };\n        });\n    }\n\n    function toggleVideoMute() {\n        setStreamerConfig(prevState => {\n            return {\n                ...prevState,\n                volume: prevState.volume === 0 ? 0.5 : 0,\n            };\n        });\n    }\n\n    function handleFormChange(event) {\n        const { name, value } = event.target;\n\n        // Update the form state.\n        setVideoFormConfig(prevState => ({\n            ...prevState,\n            [name]: value,\n            isloadDisabled: value ? false : true, // Disable load button if no video URL is entered\n        }));\n    }\n\n    function handleFormSubmit(event) {\n        event.preventDefault();\n\n        // Update the streamer config.\n        setStreamerConfig(prevState => ({\n            ...prevState,\n            // Generate a random ID to be used as for the key prop to remount vimeo player\n            id: nanoid(),\n            video: videoFormConfig.videoUrl,\n            quality: streamerConfig.quality,\n            start: 0,\n            paused: true,\n        }));\n    }\n\n    function handleVideoQualityChange(event) {\n        const quality = event.target.value;\n\n        // Update the streamer config.\n        setStreamerConfig(prevState => ({\n            ...prevState,\n            id: nanoid(),\n            quality: quality,\n        }));\n    }\n\n    function handleVideoTimeUpdate(event) {\n        // Keep track of the current time of the video.\n        setStreamerConfig(prevState => ({\n            ...prevState,\n            start: event.seconds,\n        }));\n    }\n\n    return (\n        <Box p={1}>\n            <VideoForm\n                videoFormConfig={videoFormConfig}\n                handleFormChange={handleFormChange}\n                handleFormSubmit={handleFormSubmit}\n            />\n            <Vimeo\n                /* Remount the Vimeo player when the ID changes, \n                 so to ensure new video quality gets applied */\n                key={streamerConfig.id}\n                video={streamerConfig.video}\n                quality={streamerConfig.quality}\n                paused={streamerConfig.paused}\n                start={streamerConfig.start}\n                autoplay={!streamerConfig.paused}\n                loop={streamerConfig.loop}\n                volume={streamerConfig.volume}\n                onTimeUpdate={handleVideoTimeUpdate}\n                onEnd={() =>\n                    setStreamerConfig(prevState => ({\n                        ...prevState,\n                        paused: true,\n                    }))\n                }\n                controls={true}\n                responsive={true}\n            />\n            <VideoControls\n                streamerConfig={streamerConfig}\n                toggleVideoPlay={toggleVideoPlay}\n                toggleVideoLoop={toggleVideoLoop}\n                toggleVideoMute={toggleVideoMute}\n                handleVideoQualityChange={handleVideoQualityChange}\n            />\n        </Box>\n    );\n}\n\nexport default VideoStreamer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}