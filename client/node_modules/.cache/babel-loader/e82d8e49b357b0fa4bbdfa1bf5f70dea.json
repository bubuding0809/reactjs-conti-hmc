{"ast":null,"code":"var _jsxFileName = \"/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/src/components/VideoStreamer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from \"react\";\nimport VideoForm from \"./VideoForm\";\nimport VideoControls from \"./VideoControls\";\nimport ReactPlayer from \"react-player\";\nimport { Box, Stack } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction VideoStreamer() {\n  _s();\n\n  const playerRef = useRef();\n  const [playerUrl, setPlayerUrl] = useState(\"https://vimeo.com/712561471\");\n  const [playerState, setPlayerState] = useState({\n    url: \"https://vimeo.com/712561471\",\n    playing: false,\n    controls: false,\n    played: 0,\n    volume: 0.5,\n    muted: true,\n    loop: true,\n    playbackRate: 1,\n    seeking: false\n  });\n  const handleForm = {\n    playerUrl,\n    setPlayerUrl,\n    handleLoad: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        url: playerUrl\n      }));\n    }\n  };\n  const handleVideo = {\n    style: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      backgroundColor: \"black\"\n    },\n    width: \"100%\",\n    height: \"100%\",\n    ref: playerRef,\n    onEnded: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        playing: prevState.loop\n      }));\n    },\n    onProgress: state => {\n      if (!playerState.seeking) {\n        setPlayerState(prevState => ({ ...prevState,\n          played: state.played * 100\n        }));\n      }\n    }\n  };\n  const handleControls = {\n    playerRef,\n    toggleVideoPlay: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        playing: !prevState.playing\n      }));\n    },\n    toggleVideoLoop: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        loop: !prevState.loop\n      }));\n    },\n    toggleVideoMute: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        muted: !prevState.muted\n      }));\n    },\n    handleSeekChange: e => {\n      setPlayerState(prevState => ({ ...prevState,\n        played: parseFloat(e.target.value)\n      }));\n      playerRef.current.seekTo(parseFloat(e.target.value) / 100, \"fraction\");\n    },\n\n    handleSeekStart(e) {\n      console.log(\"seeking\", e.target);\n      setPlayerState(prevState => ({ ...prevState,\n        seeking: true\n      }));\n    },\n\n    handleSeekCommitted: e => {\n      console.log(\"stop seeking\");\n      setPlayerState(prevState => ({ ...prevState,\n        seeking: false\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    p: 3,\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 1,\n      children: [/*#__PURE__*/_jsxDEV(VideoForm, { ...handleForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"relative\",\n          paddingTop: \"56.25%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactPlayer, { ...playerState,\n          ...handleVideo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VideoControls, {\n        playerState: playerState,\n        ...handleControls\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VideoStreamer, \"Uwh9OKqiTcM7xot4cV7WBaBBLG4=\");\n\n_c = VideoStreamer;\nexport default VideoStreamer;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoStreamer\");","map":{"version":3,"names":["React","useState","useRef","VideoForm","VideoControls","ReactPlayer","Box","Stack","VideoStreamer","playerRef","playerUrl","setPlayerUrl","playerState","setPlayerState","url","playing","controls","played","volume","muted","loop","playbackRate","seeking","handleForm","handleLoad","prevState","handleVideo","style","position","top","left","backgroundColor","width","height","ref","onEnded","onProgress","state","handleControls","toggleVideoPlay","toggleVideoLoop","toggleVideoMute","handleSeekChange","e","parseFloat","target","value","current","seekTo","handleSeekStart","console","log","handleSeekCommitted","paddingTop"],"sources":["/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/src/components/VideoStreamer.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport VideoForm from \"./VideoForm\";\nimport VideoControls from \"./VideoControls\";\nimport ReactPlayer from \"react-player\";\nimport { Box, Stack } from \"@mui/material\";\n\nfunction VideoStreamer() {\n  const playerRef = useRef();\n\n  const [playerUrl, setPlayerUrl] = useState(\"https://vimeo.com/712561471\");\n\n  const [playerState, setPlayerState] = useState({\n    url: \"https://vimeo.com/712561471\",\n    playing: false,\n    controls: false,\n    played: 0,\n    volume: 0.5,\n    muted: true,\n    loop: true,\n    playbackRate: 1,\n    seeking: false,\n  });\n\n  const handleForm = {\n    playerUrl,\n    setPlayerUrl,\n    handleLoad: () => {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        url: playerUrl,\n      }));\n    },\n  };\n\n  const handleVideo = {\n    style: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      backgroundColor: \"black\",\n    },\n\n    width: \"100%\",\n\n    height: \"100%\",\n\n    ref: playerRef,\n\n    onEnded: () => {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        playing: prevState.loop,\n      }));\n    },\n\n    onProgress: (state) => {\n      if (!playerState.seeking) {\n        setPlayerState((prevState) => ({\n          ...prevState,\n          played: state.played * 100,\n        }));\n      }\n    },\n  };\n\n  const handleControls = {\n    playerRef,\n\n    toggleVideoPlay: () => {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        playing: !prevState.playing,\n      }));\n    },\n\n    toggleVideoLoop: () => {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        loop: !prevState.loop,\n      }));\n    },\n\n    toggleVideoMute: () => {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        muted: !prevState.muted,\n      }));\n    },\n\n    handleSeekChange: (e) => {\n      setPlayerState((prevState) => ({\n        ...prevState,\n        played: parseFloat(e.target.value),\n      }));\n      playerRef.current.seekTo(parseFloat(e.target.value) / 100, \"fraction\");\n    },\n\n    handleSeekStart(e) {\n      console.log(\"seeking\", e.target);\n      setPlayerState((prevState) => ({\n        ...prevState,\n        seeking: true,\n      }));\n    },\n\n    handleSeekCommitted: (e) => {\n      console.log(\"stop seeking\");\n      setPlayerState((prevState) => ({\n        ...prevState,\n        seeking: false,\n      }));\n    },\n  };\n\n  return (\n    <Box p={3}>\n      <Stack spacing={1}>\n        <VideoForm {...handleForm} />\n        <Box\n          sx={{\n            position: \"relative\",\n            paddingTop: \"56.25%\",\n          }}\n        >\n          <ReactPlayer {...playerState} {...handleVideo} />\n        </Box>\n        <VideoControls playerState={playerState} {...handleControls} />\n      </Stack>\n    </Box>\n  );\n}\n\nexport default VideoStreamer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}