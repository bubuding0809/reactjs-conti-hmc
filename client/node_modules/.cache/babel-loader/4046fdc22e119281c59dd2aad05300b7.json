{"ast":null,"code":"var _jsxFileName = \"/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/src/components/VideoStreamer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport VideoForm from \"./VideoForm\";\nimport VideoControls from \"./VideoControls\";\nimport ReactPlayer from \"react-player\";\nimport { Box, Stack } from \"@mui/material\";\nimport { usePrevious } from \"./hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction VideoStreamer() {\n  _s();\n\n  // Create a ref to store the video player instance\n  const playerRef = useRef(); // Create url state for video url form\n\n  const [playerUrl, setPlayerUrl] = useState(\"https://vimeo.com/712561471\");\n  const [playing, setPlaying] = useState(true); // Create state for video player\n\n  const [playerState, setPlayerState] = useState({\n    url: \"https://vimeo.com/712561471\",\n    controls: false,\n    played: 0,\n    volume: 0.5,\n    muted: true,\n    loop: true,\n    playbackRate: 1,\n    seeking: false\n  }); // Create state to store previous player state\n\n  const formProps = {\n    playerUrl,\n    setPlayerUrl,\n    handleLoad: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        url: playerUrl\n      }));\n    }\n  };\n  const playerProps = { ...playerState,\n    playing,\n    ref: playerRef,\n    style: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      backgroundColor: \"black\"\n    },\n    width: \"100%\",\n    height: \"100%\",\n    onEnded: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        playing: prevState.loop\n      }));\n    },\n    onProgress: state => {\n      if (!playerState.seeking) {\n        setPlayerState(prevState => ({ ...prevState,\n          played: state.played * 100\n        }));\n      }\n    }\n  };\n  const controlProps = {\n    playerRef,\n    playerState,\n    toggleVideoPlay: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        playing: !prevState.playing\n      }));\n    },\n    toggleVideoLoop: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        loop: !prevState.loop\n      }));\n    },\n    toggleVideoMute: () => {\n      setPlayerState(prevState => ({ ...prevState,\n        muted: !prevState.muted\n      }));\n    },\n    handleSeekStart: e => {\n      setPlayerState(prevState => ({ ...prevState,\n        seeking: true\n      }));\n    },\n    handleSeekChange: e => {\n      setPlayerState(prevState => ({ ...prevState,\n        played: parseFloat(e.target.value)\n      }));\n      playerRef.current.seekTo(parseFloat(e.target.value) / 100, \"fraction\");\n    },\n    handleSeekCommitted: e => {\n      setPlayerState(prevState => ({ ...prevState,\n        seeking: false\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    p: 3,\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 1,\n      children: [/*#__PURE__*/_jsxDEV(VideoForm, { ...formProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          position: \"relative\",\n          paddingTop: \"56.25%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactPlayer, { ...playerProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(VideoControls, { ...controlProps\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 9\n  }, this);\n}\n\n_s(VideoStreamer, \"wDnoEmzE0R9suhpwX7fp/xoLK3k=\");\n\n_c = VideoStreamer;\nexport default VideoStreamer;\n\nvar _c;\n\n$RefreshReg$(_c, \"VideoStreamer\");","map":{"version":3,"names":["React","useState","useRef","useEffect","VideoForm","VideoControls","ReactPlayer","Box","Stack","usePrevious","VideoStreamer","playerRef","playerUrl","setPlayerUrl","playing","setPlaying","playerState","setPlayerState","url","controls","played","volume","muted","loop","playbackRate","seeking","formProps","handleLoad","prevState","playerProps","ref","style","position","top","left","backgroundColor","width","height","onEnded","onProgress","state","controlProps","toggleVideoPlay","toggleVideoLoop","toggleVideoMute","handleSeekStart","e","handleSeekChange","parseFloat","target","value","current","seekTo","handleSeekCommitted","paddingTop"],"sources":["/Users/dingruoqian/Desktop/code/reactjs-conti-hmc/src/components/VideoStreamer.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport VideoForm from \"./VideoForm\";\nimport VideoControls from \"./VideoControls\";\nimport ReactPlayer from \"react-player\";\nimport { Box, Stack } from \"@mui/material\";\nimport { usePrevious } from \"./hooks\";\n\nfunction VideoStreamer() {\n    // Create a ref to store the video player instance\n    const playerRef = useRef();\n\n    // Create url state for video url form\n    const [playerUrl, setPlayerUrl] = useState(\"https://vimeo.com/712561471\");\n\n    const [playing, setPlaying] = useState(true);\n\n    // Create state for video player\n    const [playerState, setPlayerState] = useState({\n        url: \"https://vimeo.com/712561471\",\n        controls: false,\n        played: 0,\n        volume: 0.5,\n        muted: true,\n        loop: true,\n        playbackRate: 1,\n        seeking: false,\n    });\n\n    // Create state to store previous player state\n\n    const formProps = {\n        playerUrl,\n        setPlayerUrl,\n        handleLoad: () => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                url: playerUrl,\n            }));\n        },\n    };\n\n    const playerProps = {\n        ...playerState,\n        playing,\n        ref: playerRef,\n        style: {\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            backgroundColor: \"black\",\n        },\n        width: \"100%\",\n        height: \"100%\",\n        onEnded: () => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                playing: prevState.loop,\n            }));\n        },\n        onProgress: state => {\n            if (!playerState.seeking) {\n                setPlayerState(prevState => ({\n                    ...prevState,\n                    played: state.played * 100,\n                }));\n            }\n        },\n    };\n\n    const controlProps = {\n        playerRef,\n        playerState,\n        toggleVideoPlay: () => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                playing: !prevState.playing,\n            }));\n        },\n        toggleVideoLoop: () => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                loop: !prevState.loop,\n            }));\n        },\n        toggleVideoMute: () => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                muted: !prevState.muted,\n            }));\n        },\n        handleSeekStart: e => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                seeking: true,\n            }));\n        },\n        handleSeekChange: e => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                played: parseFloat(e.target.value),\n            }));\n            playerRef.current.seekTo(\n                parseFloat(e.target.value) / 100,\n                \"fraction\"\n            );\n        },\n\n        handleSeekCommitted: e => {\n            setPlayerState(prevState => ({\n                ...prevState,\n                seeking: false,\n            }));\n        },\n    };\n    return (\n        <Box p={3}>\n            <Stack spacing={1}>\n                <VideoForm {...formProps} />\n                <Box\n                    sx={{\n                        position: \"relative\",\n                        paddingTop: \"56.25%\",\n                    }}\n                >\n                    <ReactPlayer {...playerProps} />\n                </Box>\n                <VideoControls {...controlProps} />\n            </Stack>\n        </Box>\n    );\n}\n\nexport default VideoStreamer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}